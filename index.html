<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>StrapScan</title>
  <link rel="stylesheet" href="style.css" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/signature_pad@4.1.6/dist/signature_pad.umd.min.js"></script>
  <script defer src="script.js"></script>
</head>
<body>
  <div class="flex-wrapper">
    <div class="ai-inspector">

      <!-- Header Banner -->
      <div class="strapscan-header">
        <img src="https://i.imgur.com/xCVtL06.jpeg" alt="StrapScan Banner" />
      </div>

      <!-- Intro Text -->
      <div class="subtext" style="margin-top: 1rem;">
        <p><strong>StrapScan – AI-Powered Tie-Down Inspection Tool</strong></p>
        <ul style="margin: 0.5rem 0 0.5rem 1.25rem; padding: 0; list-style-type: disc;">
          <li style="margin-bottom: 0.4rem;">Select the strap material and tie-down type to begin.</li>
          <li style="margin-bottom: 0.4rem;">Upload a clear, close-up photo of the ID tag. Ensure the serial number and markings are legible.</li>
          <li style="margin-bottom: 0.4rem;">Upload a close-up photo of the area to be analyzed. Focus on visible damage, wear, or label degradation.</li>
        </ul>
        <p style="margin-top: 0.6rem;">
          StrapScan uses AI trained on U.S. safety standards for ratchet straps and tie-downs to deliver pass/fail results in seconds.
        </p>
      </div>

      <!-- Webbing Material + Product Type -->
      <div class="row">
        <div class="half">
          <label for="material">Webbing Material</label>
          <select id="material">
            <option>Polyester</option>
            <option>Nylon</option>
          </select>
        </div>
        <div class="half">
          <label for="use">Product Type</label>
          <select id="use">
            <option>Winch Strap</option>
            <option>Ratchet Strap</option>
            <option>Logistic Strap</option>
          </select>
        </div>
      </div>

      <!-- Image Uploads -->
      <div class="row">
        <div class="half">
          <label for="damageUpload">ID Tag Upload (Required)</label>
          <input type="file" id="damageUpload" accept="image/*" />
        </div>
        <div class="half">
          <label for="secondaryUpload">Analysis Image (Required)</label>
          <input type="file" id="secondaryUpload" accept="image/*" />
        </div>
      </div>

      <!-- Standards Full Width -->
      <div class="row">
        <div class="full-width">
          <label>Inspection Standards</label>
          <div class="standards-wrapper">
            <div id="standardsBox" class="standards-note"></div>
          </div>
        </div>
      </div>

<!-- Image Previews -->
<div class="row" id="previewRow" style="display: none;">
  <div class="half">
    <label>Preview – ID Tag</label>
    <div class="preview-box">
      <img id="damagePreview" alt="ID Tag Preview" />
    </div>
  </div>

  <div class="half">
    <label>Preview – Analysis Area</label>
    <div class="preview-box">
      <img id="secondaryPreview" alt="Damage Area Preview" />
    </div>
  </div>
</div>

      <!-- Run Inspection Button -->
      <button onclick="showResult()">Run Inspection</button>
      <div id="processingMessage" style="display:none;margin-top:10px;font-weight:bold;">
        Processing image, please wait...
      </div>

      <!-- AI Result Output -->
      <div class="result-box" id="resultBox"></div>

      <!-- Signature Section -->
      <div class="row" style="margin-top: 15px; align-items: stretch;">
        <div class="half" style="display: flex; flex-direction: column;">
          <label for="signatureCanvas">Digital Signature</label>
          <canvas id="signatureCanvas" width="400" height="100" style="width: 100%; height: 100px; border: 1px solid #bbb; border-radius: 6px; background-color: #fff;"></canvas>
          <button type="button" id="clearSignatureBtn"
            style="margin-top: 10px; background-color: #888; color: #fff; border: none; padding: 8px 12px; border-radius: 6px; font-size: 13px; cursor: pointer;">
            Clear Signature
          </button>
        </div>
        <div class="half" style="display: flex; justify-content: center; align-items: center;">
          <p style="font-size: 14px; color: #444; line-height: 1.6; text-align: justify; margin: 0;">
            If you would like your PDF inspection report to include an electronic signature, please sign in the box provided before downloading. Signed reports can help support documentation in compliance and safety audits.
          </p>
        </div>
      </div>

      <!-- PDF Download Button -->
      <button id="downloadPdfBtn" style="display: none;">Download FREE PDF Report</button>

      <!-- Disclaimer -->
      <div class="disclaimer-box">
        <strong>Disclaimer:</strong><br>
        StrapScan is an AI-assisted tool designed to support preliminary visual assessments of straps and slings. It does not replace a certified inspection. Final decisions must be made by a qualified professional under applicable standards.
      </div>

    </div>
  </div>
</body>
</html>
